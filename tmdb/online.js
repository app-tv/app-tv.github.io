/*! For license information please see online.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("styled")):"function"==typeof define&&define.amd?define(["React","styled"],t):"object"==typeof exports?exports.PluginRegistry=t(require("React"),require("styled")):(e.PluginRegistry=e.PluginRegistry||{},e.PluginRegistry.online=t(e.React,e.styled))}(self,(function(e,t){return function(){var n={184:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var a=o.apply(null,n);a&&e.push(a)}else if("object"===i)for(var u in n)r.call(n,u)&&n[u]&&e.push(u)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},7:function(e,t,n){"use strict";var r=n(537),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),a.locals={},t.Z=a},645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var u=0;u<this.length;u++){var l=this[u][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var s=[].concat(e[c]);r&&a[s[0]]||(void 0!==i&&(void 0===s[5]||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=i),n&&(s[2]?(s[1]="@media ".concat(s[2]," {").concat(s[1],"}"),s[2]=n):s[2]=n),o&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=o):s[4]="".concat(o)),t.push(s))}},t}},537:function(e){"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),i="/*# ".concat(o," */"),a=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[t].concat(a).concat([i]).join("\n")}return[t].join("\n")}},379:function(e){"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],u=0;u<e.length;u++){var l=e[u],c=r.base?l[0]+r.base:l[0],s=i[c]||0,f="".concat(c," ").concat(s);i[c]=s+1;var p=n(f),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(d);else{var v=o(d,r);r.byIndex=u,t.splice(u,0,{identifier:f,updater:v,references:1})}a.push(f)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var u=n(i[a]);t[u].references--}for(var l=r(e,o),c=0;c<i.length;c++){var s=n(i[c]);0===t[s].references&&(t[s].updater(),t.splice(s,1))}i=l}}},569:function(e){"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:function(e){"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:function(e,t,n){"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:function(e){"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:function(e){"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},24:function(t){"use strict";t.exports=e},404:function(e){"use strict";e.exports=t}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={id:e,exports:{}};return n[e](i,i.exports,o),i.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return function(){"use strict";o.r(i),o.d(i,{default:function(){return de},useLatest:function(){return fe}});var e=o(24),t=o.n(e),n=o(184),r=o.n(n),a=o(404),u=o.n(a),l=o(379),c=o.n(l),s=o(795),f=o.n(s),p=o(569),d=o.n(p),v=o(565),m=o.n(v),y=o(216),h=o.n(y),b=o(589),g=o.n(b),x=o(7),O={};O.styleTagTransform=g(),O.setAttributes=m(),O.insert=d().bind(null,"head"),O.domAPI=f(),O.insertStyleElement=h(),c()(x.Z,O);var w=x.Z&&x.Z.locals?x.Z.locals:void 0;var S,j,k,P,A,E=["children"];function R(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||J(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(){return I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}function M(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function q(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=J(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function N(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){N(i,r,o,a,u,"next",e)}function u(e){N(i,r,o,a,u,"throw",e)}a(void 0)}))}}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||J(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=window.App.components,Z=D.Button,F=(D.Link,D.Loader),H=D.Loading,B=D.MenuItem,Q=D.Modal,W=D.ReactPlayer,$=window.App.hooks.useLocalStorage,G=(Error,function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return new Uint32Array([t])[0].toString(36)});function K(e){return console.log(">>> useProxy",e),e}function V(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t].toString())})).join("&")}function X(e){if(e)return U(e.split("-"),1)[0]}function Y(e){return ee.apply(this,arguments)}function ee(){return ee=L(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},r=n.timeout,o=void 0===r?5e3:r,i=new AbortController,a=setTimeout((function(){return i.abort()}),o),e.next=6,fetch(t,C(C({},n),{},{signal:i.signal})).then((function(e){return e.text()}));case 6:return u=e.sent,clearTimeout(a),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}var te=u().div(S||(S=M(["\n    float: left;\n    width: 100%;\n"]))),ne=u().h3(j||(j=M(["\n    float: left;\n    color: var(--color-primary-dark);\n    font-weight: 700;\n    text-transform: uppercase;\n    margin-right: 25px;\n    margin-bottom: 1rem;\n    font-size: 1.4rem;\n\n    @media "," {\n        font-size: 1.2rem;\n    }\n"])),(function(e){return e.theme.mediaQueries.medium})),re=u().a(k||(k=M(["\n    cursor: pointer;\n    font-size: 50px;\n    position: absolute;\n    right: 15px;\n    top: -10px;\n"]))),oe=u().div(P||(P=M(["\n    \n"]))),ie=u().a(A||(A=M(["\n    text-decoration: none;\n    display: block;\n    outline: none;\n    margin-bottom: 0.5rem;\n"]))),ae=function(e){var n=e.children,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,E);return t().createElement(Q,I({style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",maxWidth:"90%"}}},r),n)};function ue(e,t,n,r,o){for(var i=[],a=0,u=Object.entries(t);a<u.length;a++){var l=U(u[a],2),c=l[0],s=l[1];i.push({label:c,url:s})}for(var f=[],p=function(){var t=v[d];f.push({id:t.label,title:e+" / "+t.label,onClick:function(){return Promise.resolve({url:t.url,quality:t.label,subtitles:n,title:e,season:r,episode:o})},type:"play"})},d=0,v=i;d<v.length;d++)p();return f}function le(e,t,n){return ce.apply(this,arguments)}function ce(){return ce=L(regeneratorRuntime.mark((function e(t,n,r){var o,i,a,u,l,c,s,f,p,d,v,m,y,h,b,g,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(K(n));case 2:if(o=e.sent,i=[],a=new DOMParser,u=a.parseFromString(o,"text/html"),r){e.next=11;break}l=q(u.querySelectorAll("div.videos__button.selector"));try{for(l.s();!(c=l.n()).done;)f=c.value,null!==(s=f.dataset)&&void 0!==s&&s.json&&function(){var e,n=JSON.parse(null===(e=f.dataset)||void 0===e?void 0:e.json),r=f.innerText;i.push({id:G(r),title:r,onClick:function(){return le(t,n.url,r)}})}()}catch(e){l.e(e)}finally{l.f()}if(!(i.length>0)){e.next=11;break}return e.abrupt("return",{items:i});case 11:p=q(u.querySelectorAll("div.videos__movie.selector")),e.prev=12,p.s();case 14:if((d=p.n()).done){e.next=22;break}if(m=d.value,null===(v=m.dataset)||void 0===v||!v.json){e.next=20;break}if(y=function(){var e,t,n,r,o=JSON.parse(null===(e=m.dataset)||void 0===e?void 0:e.json),a=m.querySelectorAll("div.videos__item-title")[0].innerText,u=null===(t=m.attributes.s)||void 0===t?void 0:t.value,l=null===(n=m.attributes.e)||void 0===n?void 0:n.value;if("call"===o.method)return i.push({id:G(a),title:a,onClick:(r=L(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(K(o.url));case 2:return t=e.sent,n=JSON.parse(t),e.abrupt("return",Promise.resolve({items:ue(a,n.quality,n.subtitles,u,l)}));case 5:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})}),"continue";var c=o.subtitles||[],s=o.quality;if(!s)return i.push({id:G(a),title:a,onClick:function(){return Promise.resolve({url:o.url,subtitles:c,title:a,season:u,episode:l})},type:"play"}),"continue";i.push({id:G(a),title:a,onClick:function(){return Promise.resolve({items:ue(a,s,c,u,l)})}})}(),"continue"!==y){e.next=20;break}return e.abrupt("continue",20);case 20:e.next=14;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(12),p.e(e.t0);case 27:return e.prev=27,p.f(),e.finish(27);case 30:h=q(u.querySelectorAll("div.videos__season.selector"));try{for(h.s();!(b=h.n()).done;)x=b.value,null!==(g=x.dataset)&&void 0!==g&&g.json&&function(){var e,n=JSON.parse(null===(e=x.dataset)||void 0===e?void 0:e.json),o=x.querySelectorAll("div.videos__season-title")[0].innerText;i.push({id:G(o),title:o,onClick:function(){return le(t,n.url,r)}})}()}catch(e){h.e(e)}finally{h.f()}if(!(i.length<1)){e.next=34;break}return e.abrupt("return",null);case 34:return e.abrupt("return",{items:i});case 35:case"end":return e.stop()}}),e,null,[[12,24,27,30]])}))),ce.apply(this,arguments)}function se(){return(se=L(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,l,c,s,f,p,d,v,m,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://bwa-cloud.apn.monster",o={id:t.id,serial:t.is_serial?1:0},(i=null===(n=t.external_ids)||void 0===n?void 0:n.imdb_id)&&(o.imdb_id=i),a=r+"/externalids?"+V(o),e.next=7,Y(K(a));case 7:return u=e.sent,l=JSON.parse(u),c=t.title.replaceAll("'",""),s=t.original_title.replaceAll("'",""),o=C(C({},o),{},{imdb_id:l.imdb_id,kinopoisk_id:l.kinopoisk_id,title:encodeURIComponent(c),original_title:encodeURIComponent(s),original_language:t.original_language||"en",year:X(t.release_date)||1234,source:"tmdb",clarification:0}),a=r+"/lite/events?"+V(C({life:!0},o)),e.next=15,Y(K(a));case 15:u=e.sent,f=JSON.parse(u),p={online:f.filter((function(e){return-1!==["rezka","zetflix","collaps"].indexOf(e.balanser)}))},d=[],v=q(p.online);try{for(y=function(){var e=m.value;d.push({id:e.balanser,title:e.name,onClick:function(){return le(t,e.url+"?"+V(o))}})},v.s();!(m=v.n()).done;)y()}catch(e){v.e(e)}finally{v.f()}if(!(d.length<1)){e.next=23;break}return e.abrupt("return",null);case 23:return e.abrupt("return",{items:d});case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fe=function(e){var t,n=U($("online-plugin",null),2),r=n[0],o=n[1],i=(null==r||null===(t=r.latest)||void 0===t?void 0:t.filter((function(t){return e===t[0]}))[0])||null;return[i?i[1]:void 0,function(t){o((function(n){return C(C({},n),{},{latest:[[e,t]].concat(R(((null==n?void 0:n.latest)||[]).filter((function(t){return e!==t[0]})))).slice(0,100)})}))}]};function pe(e){var n=e.movie,o=(n.is_serial?"tv":"movie")+"-"+n.id,i=U(t().useState(!1),2),a=i[0],u=i[1],l=U(t().useState(void 0),2),c=l[0],s=l[1],f=U(t().useState(null),2),p=f[0],d=f[1],v=U(fe(o),2),m=v[0],y=v[1];if(t().useEffect((function(){return function(e){return se.apply(this,arguments)}(n).catch((function(){return null})).then((function(e){s((function(t){return e?[e]:null}))})),function(){return s(void 0)}}),[o]),!c)return void 0===c?t().createElement(H,null):null;var h=n.title;null!=m&&m.season&&null!=m&&m.episode&&(h=" - "+h,h=" E"+String(m.episode).padStart(2,"0")+h,h=" S"+String(m.season).padStart(2,"0")+h);var b=null,g=function(){return u(!1)};if(p){g=function(){d(null)};var x,O=[],S=q(p.subtitles);try{for(S.s();!(x=S.n()).done;){var j=x.value;O.push({kind:"subtitles",label:j.label,src:j.url})}}catch(e){S.e(e)}finally{S.f()}b=window.App.customPlayer?window.App.customPlayer(p.url,O,{movie:n,stream:p}):t().createElement(W,{playing:!0,controls:!0,width:"100%",height:"100%",url:p.url,className:r()(w.ReactPlayer),config:{file:{tracks:O},attributes:{crossOrigin:"anonymous"}}})}else{c.length>1&&(g=function(){s((function(e){var t=R(e);return t.pop(),t}))});var k=c[c.length-1],P=null==k?void 0:k.items,A=(null==m?void 0:m.selected)&&(null==m?void 0:m.selected[c.length-1]);b=void 0===k?void 0:(null==P?void 0:P.map((function(e){return t().createElement(ie,{key:e.id,onClick:function(){if("play"===e.type)return s((function(t){var n=R(t);return n[n.length-1].selected=e.id,R(n)})),void e.onClick().catch((function(){return null})).then((function(e){if(n.is_serial){var t=c.map((function(e){return e&&e.selected})).filter((function(e){return!!e}));t.pop(),y({selected:t,season:e.season,episode:e.episode})}d(e)}));s((function(t){var n=R(t);return n[n.length-1].selected=e.id,[].concat(R(n),[void 0])})),e.onClick().catch((function(){return null})).then((function(e){s((function(t){var n=R(t);return n[n.length-1]=e,n}))}))}},t().createElement(B,{title:e.title,selected:k.selected===e.id,icon:A===e.id?"play":"dot-circle"}))})))||null}return t().createElement(t().Fragment,null,t().createElement("div",{onClick:function(){return u(!0)}},t().createElement(Z,{title:"Online",icon:"play"})),t().createElement(ae,{contentLabel:"Online",isOpen:a,onRequestClose:g},t().createElement(te,null,t().createElement(re,{onClick:g},"×"),t().createElement(ne,null,h)),b?t().createElement(oe,null,b):void 0===b?t().createElement(F,null):t().createElement(oe,null,"none")))}var de={name:"online",render:{action:function(e){return t().createElement(pe,{key:"online",movie:e})}}}}(),i}()}));
//# sourceMappingURL=online.js.map