!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports.PluginRegistry=t(require("React")):(e.PluginRegistry=e.PluginRegistry||{},e.PluginRegistry.vplayer=t(e.React))}(self,(function(e){return function(){var t={877:function(e,t,n){var r=n(570),o=n(171),a=o;a.v1=r,a.v4=o,e.exports=a},327:function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,o=t;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},217:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},570:function(e,t,n){var r,o,a=n(217),l=n(327),i=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,s=t||[],f=(e=e||{}).node||r,p=void 0!==e.clockseq?e.clockseq:o;if(null==f||null==p){var y=a();null==f&&(f=r=[1|y[0],y[1],y[2],y[3],y[4],y[5]]),null==p&&(p=o=16383&(y[6]<<8|y[7]))}var d=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:u+1,m=d-i+(v-u)/1e4;if(m<0&&void 0===e.clockseq&&(p=p+1&16383),(m<0||d>i)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");i=d,u=v,o=p;var g=(1e4*(268435455&(d+=122192928e5))+v)%4294967296;s[c++]=g>>>24&255,s[c++]=g>>>16&255,s[c++]=g>>>8&255,s[c++]=255&g;var b=d/4294967296*1e4&268435455;s[c++]=b>>>8&255,s[c++]=255&b,s[c++]=b>>>24&15|16,s[c++]=b>>>16&255,s[c++]=p>>>8|128,s[c++]=255&p;for(var h=0;h<6;++h)s[c+h]=f[h];return t||l(s)}},171:function(e,t,n){var r=n(217),o=n(327);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var l=(e=e||{}).random||(e.rng||r)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,t)for(var i=0;i<16;++i)t[a+i]=l[i];return t||o(l)}},24:function(t){"use strict";t.exports=e}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return function(){"use strict";r.r(o);var e=r(24),t=r.n(e),n=r(877);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,o=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw o}}return a}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}var c=window.App.components,s=c.Header,f=c.ReactPlayer,p=null;window.App.customPlayer=function(e,n){var r;return p?t().createElement(y,{url:e,vtt:null===(r=n[0])||void 0===r?void 0:r.src,tracks:n}):t().createElement(f,{playing:!0,controls:!0,width:"100%",height:"100%",url:e,config:{file:{tracks:n},attributes:{crossOrigin:"anonymous"}}})};function y(e){var r=a(t().useState(e.url),2),o=r[0],i=r[1],c=a(t().useState(e.vtt),2),s=c[0],f=c[1],y=a(t().useState(p||"connect_"+e.code),2),d=y[0],v=y[1],m=function(e){var r=a(t().useState(null),2),o=r[0],i=r[1],c=a(t().useState(null),2),s=c[0],f=c[1];return t().useEffect((function(){return function(e,t,r){var o,a,i,c=(0,n.v4)(),s=new WebSocket((i={"%ID%":c,"%TOKEN%":Math.random().toString(36).slice(2)},Object.keys(i).reduce((function(e,t){return e.replace(t,i[t])}),"wss://0.peerjs.com/peerjs?key=peerjs&id=%ID%&token=%TOKEN%&version=1.4.6")));return s.onopen=function(t){e&&(o=e),e&&s.send(JSON.stringify({type:"OFFER",src:c,dst:e,payload:{type:"connect"}})),a=setInterval((function(){s.send(JSON.stringify({type:"HEARTBEAT"}))}),5e3)},s.onclose=function(t){console.log("close: ",e)},s.onmessage=function(e){var n=JSON.parse(e.data);if("object"===u(n)&&n&&"OFFER"===n.type){var a=n.payload;if(a){if("close"===a.type&&t((function(e){if(e&&e.listeners){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(e.listeners);try{for(n.s();!(t=n.n()).done;)(0,t.value)()}catch(e){n.e(e)}finally{n.f()}}return null})),"connect"===a.type&&(o=n.src,s.send(JSON.stringify({type:"OFFER",src:c,dst:n.src,payload:{type:"open"}}))),"connect"===a.type||"open"===a.type){var i=[];t({listeners:i,peer:n.src,send:function(e){s.send(JSON.stringify({type:"OFFER",src:c,dst:n.src,payload:{type:"message",data:e}}))},on:function(e,t){!function(e){i.push(e)}(t)}})}"message"===a.type&&r(a.data)}}},window.onbeforeunload=function(e){o&&s.send(JSON.stringify({type:"OFFER",src:c,dst:o,payload:{type:"close"}}))},function(){a&&clearInterval(a),s&&(o&&s.send(JSON.stringify({type:"OFFER",src:c,dst:o,payload:{type:"close"}})),s.close())}}(e,i,f)}),[e]),[o,s]}(d),g=a(m,2),b=g[0],h=g[1];return t().useEffect((function(){b&&(d.startsWith("connect_")||b.on("close",(function(){e.setCode&&e.setCode("")})))}),[b]),t().useEffect((function(){h&&h.channel&&(v(h.channel),p=h.channel)}),[h]),t().createElement("form",null,d.split("connect_").pop(),b&&!d.startsWith("connect_")&&t().createElement(t().Fragment,null,t().createElement("br",null),t().createElement("br",null),t().createElement("label",null,"VIDEO",t().createElement("input",{type:"text",style:{width:"100%",padding:"10px"},value:o,onChange:function(e){return i(e.target.value)}})),t().createElement("br",null),t().createElement("br",null),t().createElement("label",null,"SUBTITLES",e.tracks?t().createElement("select",{name:"vtt",value:s,onChange:function(e){return f(e.target.value)},style:{width:"100%",padding:"10px"}},e.tracks.map((function(e){return t().createElement("option",{key:e.label,value:e.src},e.label)}))):t().createElement("input",{type:"text",style:{width:"100%",padding:"10px"},value:s,onChange:function(e){return f(e.target.value)}})),t().createElement("br",null),t().createElement("br",null),t().createElement("button",{type:"button",style:{width:"100%",padding:"10px"},onClick:function(){return b.send({video:{url:o+"?"+Date.now(),vtt:s}})}},"SEND")))}function d(){var e=a(t().useState(""),2),n=e[0],r=e[1];return p||n&&!(n.length<4)?t().createElement(y,{code:n,setCode:r,url:"https://iandevlin.github.io/mdn/video-player-with-captions/video/sintel-short.mp4",vtt:"https://iandevlin.github.io/mdn/video-player-with-captions/subtitles/vtt/sintel-en.vtt"}):t().createElement("form",null,t().createElement("label",null,"CODE"),t().createElement("input",{type:"text",maxLength:"4",style:{width:"100%",padding:"10px"},value:n,onChange:function(e){return r(e.target.value.toUpperCase())}}))}var v={name:"v-player",render:{settings:function(){return t().createElement(t().Fragment,{key:"v-player"},t().createElement("br",null),t().createElement("br",null),t().createElement(s,{title:"V-Player"}),t().createElement(d,null))}}};o.default=v}(),o}()}));
//# sourceMappingURL=vplayer.js.map